{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Main(){const[count,setCount]=useState(()=>{const savedCount=localStorage.getItem(\"count\");return savedCount!==null?parseInt(savedCount,10):0;});const[countTrue,setCountTrue]=useState(()=>{const savedCountTrue=localStorage.getItem(\"countTrue\");const lastUpdateTime=localStorage.getItem(\"lastUpdateTime\");if(savedCountTrue!==null&&lastUpdateTime!==null&&Date.now()-parseInt(lastUpdateTime,10)<24*60*60*1000){return Math.max(parseInt(savedCountTrue,10),0);}else{return 10;}});const[timer,setTimer]=useState(10);const[canClick,setCanClick]=useState(true);const[isCountingDown,setIsCountingDown]=useState(false);useEffect(()=>{localStorage.setItem(\"count\",count.toString());localStorage.setItem(\"countTrue\",countTrue.toString());localStorage.setItem(\"lastUpdateTime\",Date.now().toString());let interval;if(isCountingDown&&countTrue===0){interval=setInterval(()=>{setTimer(prevTimer=>{if(prevTimer>0){setCountTrue(prevCountTrue=>Math.min(prevCountTrue+1,10));return prevTimer-1;}else{clearInterval(interval);setIsCountingDown(false);setTimer(10);// Reset timer to 10\nreturn prevTimer;}});},1000);}else if(countTrue<10&&!isCountingDown){interval=setInterval(()=>{setTimer(prevTimer=>{if(prevTimer>0){setCountTrue(prevCountTrue=>{if(prevCountTrue<10){return Math.min(prevCountTrue+1,10);}else{return prevCountTrue;}});return prevTimer-1;}else{clearInterval(interval);return prevTimer;}});},1000);}else{clearInterval(interval);}return()=>clearInterval(interval);},[countTrue,isCountingDown]);const handleClick=()=>{if(canClick){setCount(count+1);if(countTrue>0){setCountTrue(Math.max(countTrue-1,0));}setCanClick(false);setTimeout(()=>{setCanClick(true);},100);}};useEffect(()=>{if(countTrue===0){alert(\"–°–∫—Ä—É–¥–∂ —É—Å—Ç–∞–ª üò¥\");setIsCountingDown(true);}},[countTrue]);return/*#__PURE__*/_jsxs(\"div\",{className:\"Main\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"Quack Coin\"}),/*#__PURE__*/_jsx(\"p\",{className:\"count-click\",children:count}),/*#__PURE__*/_jsx(\"div\",{className:\"coin-btn\",children:/*#__PURE__*/_jsx(\"button\",{className:\"coin-button\",onClick:handleClick,disabled:!canClick||countTrue===0,children:\"...\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"box-progress\",children:[/*#__PURE__*/_jsx(\"hr\",{className:\"coin-progress\",style:{width:countTrue*2}}),/*#__PURE__*/_jsx(\"p\",{className:\"sum-true\",children:/*#__PURE__*/_jsx(\"b\",{children:countTrue})})]})]});}export default Main;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Main","count","setCount","savedCount","localStorage","getItem","parseInt","countTrue","setCountTrue","savedCountTrue","lastUpdateTime","Date","now","Math","max","timer","setTimer","canClick","setCanClick","isCountingDown","setIsCountingDown","setItem","toString","interval","setInterval","prevTimer","prevCountTrue","min","clearInterval","handleClick","setTimeout","alert","className","children","onClick","disabled","style","width"],"sources":["/Users/egorkobzev/kru-coin/src/pages/Main.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nfunction Main() {\n    const [count, setCount] = useState(() => {\n      const savedCount = localStorage.getItem(\"count\");\n      return savedCount !== null ? parseInt(savedCount, 10) : 0;\n    });\n\n    const [countTrue, setCountTrue] = useState(() => {\n      const savedCountTrue = localStorage.getItem(\"countTrue\");\n      const lastUpdateTime = localStorage.getItem(\"lastUpdateTime\");\n\n      if (\n        savedCountTrue !== null &&\n        lastUpdateTime !== null &&\n        Date.now() - parseInt(lastUpdateTime, 10) < 24 * 60 * 60 * 1000\n      ) {\n        return Math.max(parseInt(savedCountTrue, 10), 0);\n      } else {\n        return 10;\n      }\n    });\n\n    const [timer, setTimer] = useState(10);\n    const [canClick, setCanClick] = useState(true);\n    const [isCountingDown, setIsCountingDown] = useState(false);\n\n    useEffect(() => {\n      localStorage.setItem(\"count\", count.toString());\n      localStorage.setItem(\"countTrue\", countTrue.toString());\n      localStorage.setItem(\"lastUpdateTime\", Date.now().toString());\n\n      let interval;\n\n      if (isCountingDown && countTrue === 0) {\n        interval = setInterval(() => {\n          setTimer((prevTimer) => {\n            if (prevTimer > 0) {\n              setCountTrue((prevCountTrue) => Math.min(prevCountTrue + 1, 10));\n              return prevTimer - 1;\n            } else {\n              clearInterval(interval);\n              setIsCountingDown(false);\n              setTimer(10); // Reset timer to 10\n              return prevTimer;\n            }\n          });\n        }, 1000);\n      } else if (countTrue < 10 && !isCountingDown) {\n        interval = setInterval(() => {\n          setTimer((prevTimer) => {\n            if (prevTimer > 0) {\n              setCountTrue((prevCountTrue) => {\n                if (prevCountTrue < 10) {\n                  return Math.min(prevCountTrue + 1, 10);\n                } else {\n                  return prevCountTrue;\n                }\n              });\n              return prevTimer - 1;\n            } else {\n              clearInterval(interval);\n              return prevTimer;\n            }\n          });\n        }, 1000);\n      } else {\n        clearInterval(interval);\n      }\n\n      return () => clearInterval(interval);\n    }, [countTrue, isCountingDown]);\n\n    const handleClick = () => {\n      if (canClick) {\n        setCount(count + 1);\n\n        if (countTrue > 0) {\n          setCountTrue(Math.max(countTrue - 1, 0));\n        }\n\n        setCanClick(false);\n        setTimeout(() => {\n          setCanClick(true);\n        }, 100);\n      }\n    };\n\n    useEffect(() => {\n      if (countTrue === 0) {\n        alert(\"–°–∫—Ä—É–¥–∂ —É—Å—Ç–∞–ª üò¥\");\n        setIsCountingDown(true);\n      }\n    }, [countTrue]);\n\n\n  return (\n    <div className=\"Main\">\n      <h2 className=\"title\">Quack Coin</h2>\n      <p className=\"count-click\">{count}</p>\n      <div className=\"coin-btn\">\n        <button\n          className=\"coin-button\"\n          onClick={handleClick}\n          disabled={!canClick || countTrue === 0}\n        >\n          ...\n        </button>\n      </div>\n          <div className=\"box-progress\">\n              \n        <hr className=\"coin-progress\" style={{ width: countTrue * 2 }} />\n        <p className=\"sum-true\">\n          <b>{countTrue}</b>\n        </p>\n      </div>\n      \n    </div>\n  );\n}\nexport default Main;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}